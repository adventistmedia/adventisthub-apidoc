# Activity

A contacts activities.

## Fields

Field | Description | Notes
----- | ----------- | -----
activity_type<br> *enum* {visit, call, baptism, bible_study, event_attendance, enquiry, email_marketing, sms_marketing, decision} | Type of activity | Required
contact_id<br> *integer* | ID of contact the activity belongs to | Read-only
team_id<br> *integer* | ID of team the activity was associated to | Read-only
subject<br> *string* | A title or suject related to the activity type
description<br> *text* | A description related to the activity type
autogenerated<br> *boolean* | Auto-generated activities are automatically created based on another action | Read-only
completed_at<br> *datetime* | Time the activity was completed | **Required
completed_by<br> *integer* | ID of the user who completed the activity | **Required
feedback<br> *text* | Feedback for a completed activity | **Required
due_at<br> *datetime* | Time the activity was should be completed | ***Required
assigned_to_id<br> *integer* | ID of the user who is assigned to do the activity | ***Required
study_id<br> *integer* | ID of the study the activity belongs too | *Required
event_id<br> *integer* | ID of the event the activity belongs too
approach_id<br>*integer* | ID of the approach the activity belongs too
brand_id<br>*integer* | ID of the brand the activity belongs too
campaign_id<br>*integer* | ID of the campaign the activity belongs too
category_id<br>*integer* | ID of the category the activity belongs too
created_by_id<br> *integer* | ID of contact who created the activity | Read-only
created_at<br> *datetime* | When the activity was created | Read-only
updated_at<br> *datetime* | When the activity was last updated | Read-only

\* study_id is required only when the activity type is a bible_study
\** required for a completed activity
\*** required for a todo activity

## List Activities
```shell
curl https://adhubapi.adventistchurch.com/api/contacts/3/activities
-H "Authorization: Bearer team_token"
-H "Accept: application/vnd.adhub.v1+json"
```
```json
{
  "data": [
    {
      "id": "3",
      "type": "activities",
      "attributes": {
        "activity_type": "call",
        "contact_id": "3",
        "team_id": "1",
        "category_id": null,
        "campaign_id": null,
        "brand_id": null,
        "approach_id": null,
        "event_id": null,
        "due_at": "2017-05-26T12:55:00.000+10:00",
        "subject": null,
        "description": "Give them a call before midnight",
        "created_at": "2017-05-23T08:04:59.806+10:00",
        "updated_at": "2017-05-23T08:06:11.673+10:00",
        "autogenerated": false,
        "study_id": null,
        "completed_by_id": null,
        "completed_at": null,
        "status": "todo",
        "assigned_to_id": "1",
        "created_by_id": "1",
        "feedback": null
      },
      "links": {
        "self": "/api/contacts/3/activities/3"
      }
    },
    {
      "id": "1",
      "type": "activities",
      "attributes": {
        "activity_type": "decision",
        "contact_id": "3",
        "team_id": "2",
        "category_id": null,
        "campaign_id": null,
        "brand_id": null,
        "approach_id": null,
        "event_id": null,
        "due_at": null,
        "subject": null,
        "description": "Have someone meet me",
        "created_at": "2017-05-23T07:57:46.223+10:00",
        "updated_at": "2017-05-23T07:57:46.223+10:00",
        "autogenerated": false,
        "study_id": null,
        "completed_by_id": "1",
        "completed_at": "2017-05-23T08:00:00.000+10:00",
        "status": "completed",
        "assigned_to_id": null,
        "created_by_id": "1",
        "feedback": "created at visit for this"
      },
      "links": {
        "self": "/api/contacts/3/activities/1"
      }
    }
  ]
}
```

`GET /api/contacts/{contact-id}/activities`

An array of all activities for the contact.

## Show activity
```shell
curl https://adhubapi.adventistchurch.com/api/contacts/3/activities/3
-H "Authorization: Bearer team_token"
-H "Accept: application/vnd.adhub.v1+json"
```
```json
{
  "data": {
    "id": "3",
    "type": "activities",
    "attributes": {
      "activity_type": "call",
      "contact_id": "3",
      "team_id": "1",
      "category_id": null,
      "campaign_id": null,
      "brand_id": null,
      "approach_id": null,
      "event_id": null,
      "due_at": "2017-05-26T12:55:00.000+10:00",
      "subject": null,
      "description": "Give them a call before midnight",
      "created_at": "2017-05-23T08:04:59.806+10:00",
      "updated_at": "2017-05-23T08:06:11.673+10:00",
      "autogenerated": false,
      "study_id": null,
      "completed_by_id": null,
      "completed_at": null,
      "status": "todo",
      "assigned_to_id": "1",
      "created_by_id": "1",
      "feedback": null
    },
    "links": {
      "self": "/api/contacts/3/activities/3"
    }
  }
}
```

`GET /api/contacts/{contact-id}/activities/{activity-id}`

Show a contacts activity.

## Create Activity
```shell
curl -X POST https://adhubapi.adventistchurch.com/api/contacts/3/activities
-H "Authorization: Bearer team_token"
-H "Content-type: application/json"
-H "Accept: application/vnd.adhub.v1+json"
-d '{"activity": {"status": "todo", "due_at": "2017-01-01T09:00:00", "activity_type": "visit"}}'
```
```json
{
  "data": {
    "id": "4",
    "type": "activities",
    "attributes": {
      "activity_type": "visit",
      "contact_id": "3",
      "team_id": "2",
      "category_id": null,
      "campaign_id": null,
      "brand_id": null,
      "approach_id": null,
      "event_id": null,
      "due_at": "2017-01-01T09:00:00.000+11:00",
      "subject": null,
      "description": null,
      "created_at": "2017-05-24T11:46:30.689+10:00",
      "updated_at": "2017-05-24T11:46:30.689+10:00",
      "autogenerated": false,
      "study_id": null,
      "completed_by_id": null,
      "completed_at": null,
      "status": "todo",
      "assigned_to_id": null,
      "created_by_id": "1",
      "feedback": null
    },
    "links": {
      "self": "/api/contacts/3/activities/4"
    }
  }
}
```

`POST /api/contacts/{contact-id}/activities`

Todo activities can only be created for the activity type's: visit, call, baptism, bible_study
Completed activities can only be created for the activity types: visit, call, baptism, bible_study, enquiry, decision

## Update activity
```shell
curl -X PATCH https://adhubapi.adventistchurch.com/api/contacts/3/activities/4
-H "Authorization: Bearer team_token"
-H "Content-type: application/json"
-H "Accept: application/vnd.adhub.v1+json"
-d '{"activity": {"description": "Really enjoyed visit"}}'
```
```json
{
  "data": {
    "id": "4",
    "type": "activities",
    "attributes": {
      "activity_type": "visit",
      "contact_id": "3",
      "team_id": "2",
      "category_id": null,
      "campaign_id": null,
      "brand_id": null,
      "approach_id": null,
      "event_id": null,
      "due_at": "2017-01-01T09:00:00.000+11:00",
      "subject": null,
      "description": "Really enjoyed visit",
      "created_at": "2017-05-24T11:46:30.689+10:00",
      "updated_at": "2017-05-24T11:48:49.948+10:00",
      "autogenerated": false,
      "study_id": null,
      "completed_by_id": null,
      "completed_at": null,
      "status": "todo",
      "assigned_to_id": null,
      "created_by_id": "1",
      "feedback": null
    },
    "links": {
      "self": "/api/contacts/3/activities/4"
    }
  }
}
```

`PATCH /api/contacts/{contact-id}/activities/{activity-id}`
Update activities that are not auto-generated.

## Delete activity
```shell
curl -X DELETE https://adhubapi.adventistchurch.com/api/contacts/17/activities/4
-H "Authorization: Bearer team_token"
-H "Accept: application/vnd.adhub.v1+json"
```
```json
{
  "data": {
    "id": "4",
    "type": "activities",
    "attributes": {
      "activity_type": "visit",
      "contact_id": "3",
      "team_id": "2",
      "category_id": null,
      "campaign_id": null,
      "brand_id": null,
      "approach_id": null,
      "event_id": null,
      "due_at": "2017-01-01T09:00:00.000+11:00",
      "subject": null,
      "description": "Really enjoyed visit",
      "created_at": "2017-05-24T11:46:30.689+10:00",
      "updated_at": "2017-05-24T11:48:49.948+10:00",
      "autogenerated": false,
      "study_id": null,
      "completed_by_id": null,
      "completed_at": null,
      "status": "todo",
      "assigned_to_id": null,
      "created_by_id": "1",
      "feedback": null
    },
    "links": {
      "self": "/api/contacts/3/activities/4"
    }
  }
}
```

`DELETE /api/contacts/{contact-id}/activities/{activity-id}`

Delete activities that are not auto-generated.